### 分区管理工具

Linux中分区管理工具有以下这些：

列出块设备

* `lsblk`

创建分区使用：

* `fdisk`: 创建`MBR`分区
* `gdisk`: 创建`GPT`分区
* `parted`: 高级分区操作

重新设置内存中的内核分区表版本

* `partprobe`

#### `parted`命令

parted的操作都是实时生效的，小心使用

用法：

```bash
parted 	[选项]... [设备 [命令 [参数]...]...] 

parted /dev/sdb mklabel gpt|msdos # msdos表示mbr分区

parted /dev/sdb print

parted /dev/sdb	mkpart primary 1 200  #（默认M） 

parted /dev/sdb	rm 1

parted –l #列出分区信息
```

##### `parted`示例

1. 列出分区信息

```bash
[root@mylinuxops ~]# parted -l
Error: /dev/vdb: unrecognised disk label
Model: Virtio Block Device (virtblk)                                      
Disk /dev/vdb: 53.7GB
Sector size (logical/physical): 512B/512B
Partition Table: unknown
Disk Flags: 

Model: Virtio Block Device (virtblk)
Disk /dev/vda: 215GB
Sector size (logical/physical): 512B/512B
Partition Table: msdos
Disk Flags: 

Number  Start   End    Size    Type     File system     Flags
 1      1049kB  525MB  524MB   primary  ext4            boot
 2      525MB   213GB  212GB   primary  ext4
 3      213GB   215GB  2147MB  primary  linux-swap(v1)
```

2. 创建分区信息

```bash
[root@mylinuxops ~]# parted /dev/vdb mklabel gpt
Information: You may need to update /etc/fstab.
```

3. 打印分区信息

```bash
# 此为刚才创建的分区，由于还没有分区，分区表为空
[root@mylinuxops ~]# parted /dev/vdb print
Model: Virtio Block Device (virtblk)
Disk /dev/vdb: 53.7GB
Sector size (logical/physical): 512B/512B
Partition Table: gpt
Disk Flags: 

Number  Start  End  Size  File system  Name  Flags
```

4. 对vdb进行分区

```bash
[root@mylinuxops ~]# parted /dev/vdb mkpart primary 1 10240
Information: You may need to update /etc/fstab.
# 分区后再次查看分区信息
[root@mylinuxops ~]# parted /dev/vdb print
Model: Virtio Block Device (virtblk)
Disk /dev/vdb: 53.7GB
Sector size (logical/physical): 512B/512B
Partition Table: gpt
Disk Flags: 

Number  Start   End     Size    File system  Name     Flags
 1      1049kB  10.2GB  10.2GB               primary
```

5. 再次进行分区

```bash
# 再次分区时，起始点为前一次的END位置+1
[root@mylinuxops ~]# parted /dev/vdb mkpart primary 10241 20480
Information: You may need to update /etc/fstab.
# 分区后再次查看分区信息
[root@mylinuxops ~]# parted /dev/vdb print
Model: Virtio Block Device (virtblk)
Disk /dev/vdb: 53.7GB
Sector size (logical/physical): 512B/512B
Partition Table: gpt
Disk Flags: 

Number  Start   End     Size    File system  Name     Flags
 1      1049kB  10.2GB  10.2GB               primary
 2      10.2GB  20.5GB  10.2GB               primary
```

6. 删除分区

```bash
# 将分区表中的Number为2的分区删除
[root@mylinuxops ~]# parted /dev/vdb rm 2
Information: You may need to update /etc/fstab.
# 查看分区表信息
[root@mylinuxops ~]# parted /dev/vdb print                                
Model: Virtio Block Device (virtblk)
Disk /dev/vdb: 53.7GB
Sector size (logical/physical): 512B/512B
Partition Table: gpt
Disk Flags: 

Number  Start   End     Size    File system  Name     Flags
 1      1049kB  10.2GB  10.2GB               primary
```

