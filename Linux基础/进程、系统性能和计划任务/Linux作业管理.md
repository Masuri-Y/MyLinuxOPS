## Linux作业管理

Linux的作业分为两种，前台作业和后台作业。

* 前台作业：通过终端启动，且启动后一直占据终端

* 后台作业：可通过终端启动，但启动后即转入后台运行（释放终端）

让前台作业运行于后台：

* 运行中的作业：`ctrl + z`
* 尚未启动的作业：`COMMAND &`

注意：后台作业虽然被送往后台运行，但其依然与终端相关；退出终端，将关闭后台作业。如果希望送往后台后，剥离与终端的关系可以使用以下两种方法。

1. 使用`nohup`配合`&`来执行命令

   ```bash
   nohup COMMAND &> /dev/null &
   ```

2. 使用`screen`命令创建出窗口，在窗口中执行命令。

   ```bash
   screen; COMMAND
   ```

查看当前终端所有作业：

```bash
jobs
```

作业控制：

* 把指定的后台作业调回前台

  ```bash
  fg [[%]JOB_NUM]
  ```

* 让送往后台的作业在后台继续运行

  ```bash
  bg [[%]JOB_NUM]
  ```

* 终止指定的作业

  ```bash
  kill [%JOB_NUM]： 
  ```

* 暂停后端的作业

  ```bash
  kill 19 [%JOB_NUM]
  # 或
  killall 19 PROGRAM
  ```

* 继续执行后段作业

  ```bash
  kill 18 [%JOB_NUM]
  # 或
  killall 18 PROGRAM
  ```


### 并行运行

在很多场景下系统执行命令的效率偏低，CPU速度很快，如果能并行执行命令那么可以充分提升效率。

方法1

```bash
# 创建一个脚本文件，将所有要执行的命令使用&发送到后台实现并行执行
vi all.sh
f1.sh &
f2.sh &
f3.sh &
```

方法2

```bash
(f1.sh &);(f2.sh &);(f3.sh &);
```

方法3

```bash
{ f1.sh & f2.sh & f3.sh & }
```

